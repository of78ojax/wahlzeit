Project:&nbsp;&nbsp;Environment / Holiday photos  
Repo:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://github.com/of78ojax/wahlzeit/  
Tag:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;adap-hw01  
Diff:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://github.com/of78ojax/wahlzeit/compare/adap-hw00...of78ojax:adap-hw01

## Set-up
Wie beschrieben, habe ich zunächstr eine passende *jdk* Version und *Docker* insalliert, anschließend das Repo geforkt und nach Anleitung gebaut.  
Zum Schluss die Anwendung noch einige Male gestartet und ausprobiert, sowie den VSCode Debugger verbunden.   
Ich habe nur die geforderten 3 Bilder hochgeladen, da ich meine anderen Fotos erst noch in ein nicht ganz so übertriebene Auflösung konvertieren muss.

## Compare Dockerfiles
### Ablauf
Zunächst wird das Basisimage fest gelegt in unserem Fall Java/JVM
```Docker
FROM adoptopenjdk/openjdk11-openj9:alpine-slim  
```
Aschließend werden die benötigten Datein von gradle, gradlew und die source Dateine in unser Image kopiert.  
```Docker
COPY src /app/src
COPY gradle /app/gradle
COPY gradlew /app/gradlew
```
Bevor der Port, der innerhalb des Containers genutzt werden soll, angegeben wird,
```Docker
EXPOSE 8080
```
werden unterschiedliche gradle Instruktionen zum Ausführen von Testfällen und dem Bau des Projects ausgeführt.
```Docker
# Exemplarisch das Auführen der Testfälle über gradle
RUN ./gradlew test
```
### Unterschiede
*Dockerfile* trennt den beschriebenen Ablauf in 2 Images zum Bauen bzw. Ausführen auf. Dabei nutzt Das *Run*-Image Jetty als Basis, das uns den benötigten Webserver und Java Servlet bietet.
```Dockerfile
FROM jetty:9.4-jre11-slim
```
Den wir in *Dockfile.simple* über das Buildscript mit aufsetzten müssen.

### Vorteile
Durch das Trennen von Bauen und Ausführen ist unser Image die unsere eigenltiche App enthält deutlich kleiner, da wir uns nur die benötigten, gebauten Dateien aus dem Build Image kopieren. 
```Docker
COPY --from=builder /builder/build/libs/*.war /var/lib/jetty/webapps/wahlzeit.war
```
Zudem kann wie oben beschrieben, ein andere Kontext/Basisimage genutzt werden und unser Webserver (```jetty```) muss nicht zusätzlich über ein Buildscript eingebunden werden, das somit nicht extra gewartet werden muss.  
Auch wird die Übersichtlichkeit verbessert, welche Zusätze für welches Images benötigt werden.
Die Benennung der Buildstage
```Docker
FROM ...:alpine-slim as builder
```
verinfacht weiterhin die Verwendung / Bennenung und Änderungen erzeugen weniger Seiteneffekte (da bspw. Pfade indirekt gegeben sind).